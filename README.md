# å…è´¹éŸ³ä¹MCPæœåŠ¡å™¨

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºå°æ™ºAIéŸ³å“è®¾è®¡çš„å…è´¹éŸ³ä¹MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æœåŠ¡å™¨ï¼Œæä¾›éŸ³ä¹æœç´¢ã€æ’­æ”¾æ§åˆ¶ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸµ **éŸ³ä¹æœç´¢**: æ”¯æŒæŒ‰æ­Œæ›²åã€æ­Œæ‰‹åæœç´¢
- â–¶ï¸ **æ’­æ”¾æ§åˆ¶**: æ’­æ”¾ã€æš‚åœã€åœæ­¢ã€ä¸Šä¸€é¦–ã€ä¸‹ä¸€é¦–
- ğŸ”Š **éŸ³é‡æ§åˆ¶**: è°ƒèŠ‚æ’­æ”¾éŸ³é‡ï¼ˆ0-100ï¼‰
- ğŸ“ **æ’­æ”¾åˆ—è¡¨**: æ·»åŠ ã€æŸ¥çœ‹ã€æ¸…ç©ºæ’­æ”¾åˆ—è¡¨
- ğŸ†“ **å®Œå…¨å…è´¹**: åŸºäºå¼€æºåè®®ï¼Œæ— éœ€ä»˜è´¹
- ğŸ”Œ **æ ‡å‡†æ¥å£**: éµå¾ªMCPåè®®æ ‡å‡†

## å®‰è£…é…ç½®

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…Python 3.8+ï¼š
```bash
python3 --version
```

### 2. å®‰è£…ä¾èµ–

```bash
cd /Users/a1234/Documents/music
pip3 install -r requirements.txt
```

### 3. æµ‹è¯•æœåŠ¡å™¨

```bash
python3 music_mcp_server.py
```

### 4. å°æ™ºAIé…ç½®

#### æ­¥éª¤1ï¼šè·å–MCPæ¥å…¥ç‚¹
1. ç™»å½• [xiaozhi.me](https://xiaozhi.me) æ§åˆ¶å°
2. è¿›å…¥æ™ºèƒ½ä½“çš„é…ç½®è§’è‰²é¡µé¢
3. åœ¨å³ä¸‹è§’æ‰¾åˆ°è¯¥æ™ºèƒ½ä½“ä¸“å±çš„MCPæ¥å…¥ç‚¹

#### æ­¥éª¤2ï¼šé…ç½®MCPæœåŠ¡å™¨
åœ¨å°æ™ºAIæ§åˆ¶å°ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "name": "å…è´¹éŸ³ä¹æœåŠ¡å™¨",
  "command": "python3",
  "args": ["/Users/a1234/Documents/music/music_mcp_server.py"],
  "transport": "stdio"
}
```

## ä½¿ç”¨æ–¹æ³•

é…ç½®å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡è¯­éŸ³æˆ–æ–‡å­—ä¸å°æ™ºAIäº¤äº’ï¼š

### éŸ³ä¹æœç´¢
- "æœç´¢å‘¨æ°ä¼¦çš„æ­Œæ›²"
- "æ‰¾ä¸€äº›æµè¡ŒéŸ³ä¹"
- "æœç´¢é’èŠ±ç“·"

### æ’­æ”¾æ§åˆ¶
- "æ’­æ”¾é’èŠ±ç“·"
- "æš‚åœéŸ³ä¹"
- "ç»§ç»­æ’­æ”¾"
- "åœæ­¢æ’­æ”¾"
- "ä¸‹ä¸€é¦–æ­Œ"
- "ä¸Šä¸€é¦–æ­Œ"

### éŸ³é‡æ§åˆ¶
- "éŸ³é‡è°ƒåˆ°80"
- "å£°éŸ³å°ä¸€ç‚¹"
- "éŸ³é‡è®¾ç½®ä¸º50"

### æ’­æ”¾åˆ—è¡¨ç®¡ç†
- "æ˜¾ç¤ºæ’­æ”¾åˆ—è¡¨"
- "æ·»åŠ è¿™é¦–æ­Œåˆ°æ’­æ”¾åˆ—è¡¨"
- "æ¸…ç©ºæ’­æ”¾åˆ—è¡¨"

## å¯ç”¨å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | å‚æ•° |
|---------|---------|------|
| search_music | æœç´¢éŸ³ä¹ | queryï¼ˆæœç´¢å…³é”®è¯ï¼‰, limitï¼ˆç»“æœæ•°é‡ï¼‰ |
| play_music | æ’­æ”¾æŒ‡å®šæ­Œæ›² | song_idï¼ˆæ­Œæ›²IDï¼‰, song_name, artist |
| pause_music | æš‚åœæ’­æ”¾ | æ—  |
| resume_music | ç»§ç»­æ’­æ”¾ | æ—  |
| stop_music | åœæ­¢æ’­æ”¾ | æ—  |
| next_song | ä¸‹ä¸€é¦–æ­Œ | æ—  |
| previous_song | ä¸Šä¸€é¦–æ­Œ | æ—  |
| set_volume | è®¾ç½®éŸ³é‡ | volumeï¼ˆ0-100ï¼‰ |
| add_to_playlist | æ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨ | song_id, song_name, artist |
| get_playlist | è·å–æ’­æ”¾åˆ—è¡¨ | æ—  |
| clear_playlist | æ¸…ç©ºæ’­æ”¾åˆ—è¡¨ | æ—  |

## æŠ€æœ¯æ¶æ„

- **åè®®**: MCP (Model Context Protocol)
- **ä¼ è¾“**: stdioï¼ˆæ ‡å‡†è¾“å…¥è¾“å‡ºï¼‰
- **è¯­è¨€**: Python 3.8+
- **ä¾èµ–**: mcp, httpx, pydantic

## æ‰©å±•å¼€å‘

### æ¥å…¥çœŸå®éŸ³ä¹API

å½“å‰ç‰ˆæœ¬ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹ `search_music_api` å‡½æ•°æ¥æ¥å…¥çœŸå®çš„å…è´¹éŸ³ä¹APIï¼š

```python
async def search_music_api(query: str, limit: int = 10) -> List[Dict[str, Any]]:
    async with httpx.AsyncClient() as client:
        # æ¥å…¥æ‚¨é€‰æ‹©çš„å…è´¹éŸ³ä¹API
        response = await client.get(
            "https://api.example.com/search",
            params={"q": query, "limit": limit}
        )
        data = response.json()
        return parse_search_results(data)
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `handle_list_tools()` ä¸­æ·»åŠ æ–°å·¥å…·å®šä¹‰
2. åœ¨ `handle_call_tool()` ä¸­å®ç°å·¥å…·é€»è¾‘
3. æ›´æ–°é…ç½®æ–‡ä»¶å’Œæ–‡æ¡£

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æœåŠ¡å™¨å¯åŠ¨å¤±è´¥**
A: æ£€æŸ¥Pythonç‰ˆæœ¬å’Œä¾èµ–åŒ…æ˜¯å¦æ­£ç¡®å®‰è£…

**Q: å°æ™ºAIæ— æ³•è¿æ¥**
A: ç¡®è®¤æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼Œæ£€æŸ¥MCPæ¥å…¥ç‚¹é…ç½®

**Q: æœç´¢æ— ç»“æœ**
A: å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå¯æ¥å…¥çœŸå®éŸ³ä¹API

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```bash
PYTHON_LOG_LEVEL=DEBUG python3 music_mcp_server.py
```

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºï¼Œæ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

---

**æ³¨æ„**: è¯·ç¡®ä¿éµå®ˆç›¸å…³éŸ³ä¹ç‰ˆæƒæ³•å¾‹æ³•è§„ï¼Œä»…ä½¿ç”¨åˆæ³•çš„éŸ³ä¹èµ„æºã€‚